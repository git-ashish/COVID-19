(()=>{"use strict";var e={636:(e,t,n)=>{var o=n(799);const i=n.p+"nodes.json",r=n.p+"links.json",a=n.p+"triplets.json";var l=n(832),c=n(194),d=n.n(c),p=n(129),h=n.n(p);const m=()=>{const e=new l.Graphics;e.interactiveChildren=!1,e.alpha=.05,s.viewport.addChild(e),s.links.filter((e=>e.value>.2)).forEach((({source:t,target:n,value:o})=>{e.lineStyle(o,16777215),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y)}))};let u=[];const w="&nbsp;",f="—————————————",g='<span class="block"></span>',v=16702720,y=13095362,x=()=>{const e=new l.Graphics;e.alpha=0,e.name="nodes",s.viewport.addChild(e),s.nodes.forEach((t=>{const n=.1*t.docs;t.circle=new l.Graphics,t.circle.beginFill(y,1),t.circle.drawCircle(0,0,n),t.circle.endFill(),t.circle.tint=y,t.circle.position=new l.Point(t.x,t.y),t.circle.hitArea=new l.Circle(0,0,s.distance),t.circle.interactive=!0,e.addChild(t.circle);const[i,r]=(e=>{const t=Math.round(e.length/2);for(let n=t,o=t;n<e.length||o>=0;n++,o--){if(" "===e[n])return[e.substring(0,n),e.substring(n+1)];if(" "===e[o])return[e.substring(0,o),e.substring(o+1)]}return[e,""]})(t.name);t.text=new l.BitmapText(`${i}\n${r}`,{fontName:"Arial",fontSize:"21",fill:y,align:"center"}),t.text.scale.set(.2),t.text.position.set(t.x-t.text.width/2,t.y+n+2),e.addChild(t.text),t.circle.mouseover=e=>{!function(e){const t=(0,o.Ys)("body").append("div").attr("id","focus");t.append("h2").html(e.name),t.append("h3").html(e.docs+" Publications"),t.append("p").html(w),t.append("h3").html("Tokens by tf-idf"),t.append("p").html(f),Object.entries(e.tokens).slice(0,20).forEach((([e,n])=>{const o=g.repeat(n/10);t.append("p").html(`${o} &nbsp; ${e}`)})),t.append("p").html(w),t.append("h3").html("Co-author Nationalities"),t.append("p").html(f),Object.entries(e.nationalities).sort().forEach((([e,n],o)=>{const i=g.repeat(n);t.append("p").html(`${i} &nbsp; ${e}`)})),t.append("p").html(w),t.append("h3").html("Publication Years"),t.append("p").html(f),Object.entries(e.years).forEach((([e,n],o)=>{const i=g.repeat(n);t.append("p").html(`${i} &nbsp; ${e}`)}))}(t),s.nodes.filter((e=>t.peers.includes(e.id))).forEach((e=>{e.circle.tint=v,e.text.tint=v}))},t.circle.mouseout=e=>{(0,o.Ys)("#focus").remove(),s.tokens=[],s.nodes.forEach((e=>{e.circle.tint=y,e.text.tint=y}))}}))};var b=n(475);const C=n.p+"arial.xml";n.p,window.s={distance:30,links:m,nodes:x,tokens:[]},Promise.all([(0,o.AVB)(r),(0,o.AVB)(i),(0,o.AVB)(a)]).then((([e,t,n])=>{s.links=e,console.log("links",s.links.length),s.nodes=t,console.log("nodes",s.nodes.length),s.triplets=n,console.log("triplets",s.triplets.length),s.app=new l.Application({width:window.innerWidth,height:window.innerHeight,antialias:!0,transparent:!0,resolution:2,autoDensity:!0,autoResize:!0,resizeTo:window}),document.body.prepend(s.app.view),s.viewport=new b.l({screenWidth:window.innerWidth,screenHeight:window.innerHeight,interaction:s.app.renderer.plugins.interaction}),s.app.stage.addChild(s.viewport);const i=(0,o.Wem)(s.nodes,(e=>e.x)),r=(0,o.Wem)(s.nodes,(e=>e.y)),a=i[1]-i[0],c=r[1]-r[0],p=window.innerWidth/a,w=window.innerHeight/c;let f=p<w?p:w;f=f,s.zoomMin=.8*f,s.zoomMax=4,s.viewport.drag().pinch().wheel().decelerate().clampZoom({minScale:s.zoomMin,maxScale:s.zoomMax}).setTransform(window.innerWidth/2,window.innerHeight/2,f,f);const g=(0,o.BYU)().domain([s.zoomMin,2]).range([1,0]),v=(0,o.BYU)().domain([s.zoomMin,2]).range([0,1]);s.viewport.on("zoomed",(e=>{const t=e.viewport.lastViewport.scaleX;e.viewport.children.find((e=>"contours"==e.name)).alpha=g(t),e.viewport.children.find((e=>"nodes"==e.name)).alpha=v(t),e.viewport.children.find((e=>"keywords_close"==e.name)).alpha=v(t),e.viewport.children.find((e=>"keywords_distant"==e.name)).alpha=g(t)})),s.app.loader.add("Arial",C).load((()=>{(()=>{const e=5e3,t=document.createElement("canvas"),n=t.getContext("2d");t.width=e,t.height=e;const o=n.createRadialGradient(2500,2500,0,2500,2500,2500);o.addColorStop(1,"#000000"),o.addColorStop(0,"#333333"),n.fillStyle=o,n.fillRect(0,0,t.width,t.height);let i=l.Texture.from(t),r=new l.Sprite(i);r.width=e,r.height=e,r.position=new l.Point(-2500,-2500),r.interactiveChildren=!1,s.viewport.addChild(r)})(),m(),(()=>{const e=new l.Graphics;e.interactiveChildren=!1,e.name="contours",s.viewport.addChild(e);const t=(0,o.Wem)(s.nodes,(e=>e.x)),n=(0,o.Wem)(s.nodes,(e=>e.y)),i=t[1]-t[0],r=n[1]-n[0],a=t[0],c=n[0],d=(0,o._K_)().x((e=>e.x-a)).y((e=>e.y-c)).weight((e=>e.relevancy)).size([i,r]).cellSize(15).bandwidth(100).thresholds(30)(s.nodes);d.forEach((e=>e.coordinates=e.coordinates.map((e=>e.map((e=>e.map((e=>[e[0]+a,e[1]+c]))))))));const p=4/d.length;let h=1;for(let t=d.length-1;t>=0;t--){const n=4-p*h;e.lineStyle(n,10066329),h+=1,d[t].coordinates.forEach((t=>{t.forEach((t=>{t.forEach((([t,n],o)=>{0==o&&e.moveTo(t,n),e.lineTo(t,n)}))})),e.closePath()}))}})(),x(),(()=>{const e=new l.Graphics;e.alpha=0,e.name="keywords_close",e.interactiveChildren=!1,s.viewport.addChild(e),s.triplets.forEach((t=>{const n=t.tokens.slice(0,3),o=5*(n.length-1)/2,i=t.position[0],s=t.position[1];n.forEach((([t,n],r)=>{const a=new l.BitmapText(t,{fontName:"Arial",fontSize:"4",tint:6710886,align:"center"});a.position.set(i-a.width/2,s-o+5*r),e.addChild(a)}))}))})(),(()=>{const e=new l.Graphics;e.name="keywords_distant",e.interactiveChildren=!1,s.viewport.addChild(e),s.triplets.forEach((t=>{const n=t.tokens.slice(0,1),o=t.position[0],i=t.position[1],s=new l.BitmapText(n[0][0],{fontName:"Arial",fontSize:"64",fill:16702720,align:"center"}),r=n[0][1];s.scale.set(.004*(r+100)),s.position.set(o-s.width/2,i-s.height/2);let a=!1;for(var c=0;c<u.length;c++){const e=u[c],t=s,n=50;if(!(t.x>e.x+e.width+n||t.x+t.width+n<e.x||t.y>e.y+e.height+n||t.y+t.height+n<e.y)){a=!0;break}}a||(e.addChild(s),u.push(s))}))})(),(()=>{const e=h()({every:1});setInterval((()=>{e.tick()}),1e3/60);const t=document.getElementById("fps");e.on("data",(function(e){t.innerHTML=Math.floor(parseInt(e))}))})(),new(d())({data:{src:async()=>s.nodes.reduce(((e,{name:t,x:n,y:o})=>(e.push({name:t,x:n,y:o}),e)),[]),key:["name"],cache:!1},sort:(e,t)=>e.match<t.match?-1:e.match>t.match?1:0,placeHolder:"Search",selector:"#autoComplete",threshold:0,debounce:0,searchEngine:"loose",highlight:!0,maxResults:10,resultsList:{render:!0,container:e=>{e.setAttribute("id","autoComplete_list")},destination:document.querySelector("#autoComplete"),position:"afterend",element:"ul"},resultItem:{content:(e,t)=>{t.innerHTML=e.match},element:"li"},noResults:()=>{const e=document.createElement("li");e.setAttribute("class","no_result"),e.setAttribute("tabindex","1"),e.innerHTML="No Results",document.querySelector("#autoComplete_list").appendChild(e)},onSelection:e=>{console.log(e),e.selection.key;const t=e.selection.value,{x:n,y:o,name:i}=t,r=s.viewport.center.x,a=s.viewport.center.y;document.querySelector("#autoComplete").value=i,s.viewport.scale.x<1?s.viewport.animate({scale:s.zoomMax,position:new l.Point(n,o),time:2e3,ease:"easeInOutSine"}):s.viewport.animate({scale:s.zoomMin,position:new l.Point((n+r)/2,(o+a)/2),time:2e3,ease:"easeInOutSine",callbackOnComplete:()=>{s.viewport.animate({scale:s.zoomMax,position:new l.Point(n,o),time:2e3,ease:"easeInOutSine"})}})}})})),window.onresize=function(){s.viewport.resize()},window.addEventListener("wheel",(e=>{e.preventDefault()}),{passive:!1})}))}},t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");o.length&&(e=o[o.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={179:0},t=[[636,834]],o=()=>{};function i(){for(var o,i=0;i<t.length;i++){for(var s=t[i],r=!0,a=1;a<s.length;a++){var l=s[a];0!==e[l]&&(r=!1)}r&&(t.splice(i--,1),o=n(n.s=s[0]))}return 0===t.length&&(n.x(),n.x=()=>{}),o}n.x=()=>{n.x=()=>{},r=r.slice();for(var e=0;e<r.length;e++)s(r[e]);return(o=i)()};var s=i=>{for(var s,r,[l,c,d,p]=i,h=0,m=[];h<l.length;h++)r=l[h],n.o(e,r)&&e[r]&&m.push(e[r][0]),e[r]=0;for(s in c)n.o(c,s)&&(n.m[s]=c[s]);for(d&&d(n),a(i);m.length;)m.shift()();return p&&t.push.apply(t,p),o()},r=self.webpackChunkcartography_of_covid_19=self.webpackChunkcartography_of_covid_19||[],a=r.push.bind(r);r.push=s})(),n.x()})();